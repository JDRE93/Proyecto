<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>30 A√±os - Tu Cuponera Especial</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif'],
                        'script': ['Dancing Script', 'cursive']
                    },
                    colors: {
                        'brand-ivory': '#FDFBF5',
                        'brand-gold': '#d4af37',
                        'brand-wine': '#722f37',
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #FDFBF5; scroll-behavior: smooth; }
        .ticket-design {
            border: 2px dashed #d1d5db; background-color: #ffffff; position: relative;
        }
        .ticket-design::before, .ticket-design::after {
            content: ''; position: absolute; width: 24px; height: 24px;
            background-color: #FDFBF5; border-radius: 50%; top: 50%; transform: translateY(-50%);
        }
        .ticket-design::before { left: -14px; border-right: 2px dashed #d1d5db; }
        .ticket-design::after { right: -14px; border-left: 2px dashed #d1d5db; }

        .coupon-redeemed { opacity: 0.5; filter: grayscale(1); }
        .text-strike { text-decoration: line-through; text-decoration-color: #ef4444; text-decoration-thickness: 3px; }
        
        .redeem-overlay {
            position: absolute; top: 50%; left: 0; right: 0;
            background-color: #ef4444; color: white; font-weight: 800;
            text-transform: uppercase; padding: 0.5rem; transform: rotate(-10deg) translateY(-50%);
            z-index: 50; font-size: 1.5rem; text-align: center; pointer-events: none;
        }

        @keyframes popIn {
            from { opacity: 0; transform: scale(0.9) translateY(10px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        .animate-pop { animation: popIn 0.5s ease forwards; }

        /* Estilo para el contador */
        .countdown-item {
            background: white;
            padding: 1rem;
            border-radius: 0.75rem;
            min-width: 80px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }
    </style>
</head>
<body class="p-4 md:p-10">

    <div id="countdown-wrapper" class="hidden min-h-[80vh] flex flex-col items-center justify-center text-center">
        <h1 class="font-script text-6xl md:text-8xl text-gray-800 mb-4">Felices 30</h1>
        <p class="font-script text-3xl text-brand-wine mb-12">Tu a√±o de sorpresas comienza en...</p>
        <div class="flex gap-4 md:gap-8 flex-wrap justify-center">
            <div class="countdown-item"><span id="cd-days" class="text-4xl font-bold text-brand-wine">00</span><br><span class="text-xs uppercase">D√≠as</span></div>
            <div class="countdown-item"><span id="cd-hours" class="text-4xl font-bold text-brand-wine">00</span><br><span class="text-xs uppercase">Horas</span></div>
            <div class="countdown-item"><span id="cd-mins" class="text-4xl font-bold text-brand-wine">00</span><br><span class="text-xs uppercase">Mins</span></div>
            <div class="countdown-item"><span id="cd-secs" class="text-4xl font-bold text-brand-wine">00</span><br><span class="text-xs uppercase">Segs</span></div>
        </div>
        <p class="mt-12 italic text-gray-400">‚ÄúLo bueno se hace esperar...‚Äù</p>
    </div>

    <div id="main-content" class="hidden">
        <header class="mb-12 text-center">
            <h1 class="font-script text-6xl md:text-8xl text-gray-800">Felices 30</h1>
            <p class="font-script text-2xl text-brand-wine mt-2 italic">Un a√±o lleno de momentos solo para ti</p>
        </header>

        <main class="max-w-6xl mx-auto space-y-16">
            <section>
                <h2 class="font-script text-5xl text-center text-gray-800 mb-8">Eventos Especiales</h2>
                <div id="specials-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
            </section>

            <hr class="border-dashed border-gray-300">

            <section>
                <h2 class="font-script text-5xl text-center text-gray-800 mb-8">Talonario "A Tu Antojo"</h2>
                <div id="main-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
            </section>

            <section id="secret-section" class="hidden pt-10 border-t-4 border-double border-red-200">
                <h2 class="font-script text-5xl text-center text-red-700 mb-10 italic">El Ba√∫l Secreto üî•</h2>
                <div id="secret-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
            </section>
        </main>
    </div>

    <footer class="mt-24 py-10 text-center border-t border-gray-100">
        <p class="text-gray-400 text-sm italic">
            Hecho con <span id="secret-trigger" class="cursor-pointer text-red-300 hover:text-red-500 transition-colors">‚ù§Ô∏è</span> por tu esposo ‚Ä¢ 2026
        </p>
        <p class="text-gray-400 text-xs mt-2 italic">El exceso de cupones puede generar gru√±oncitis, √∫selos con moderaci√≥n</p>
    </footer>

    <script>
        // ======================================================
        // CONFIGURACI√ìN (Activa MODO_PRUEBA para ver todo hoy)
        // ======================================================
        const MODO_PRUEBA = true; 
        const TU_EMAIL = "josuedaniel729@gmail.com"; 
        const UNLOCK_DATE = new Date('2026-01-03T07:00:00'); // Desbloqueo ma√±ana a las 7 am

        const coupons = [
            // --- ESPECIALES ---
            { id: 'cumple', unlockDate: '2026-01-03T00:00:00', title: '¬°Feliz Cumplea√±os!', description: 'Hoy eres la Reina y la vas a pasar muy bien.', imageUrl: './img/cumple.jpg', category: 'D√≠a Especial', hasImage: true },
            { id: 'medellin', unlockDate: '2026-01-25T08:00:00', title: 'Aniversario en Medell√≠n', description: 'Escapada rom√°ntica con jacuzzi para nuestro aniversario 15.', imageUrl: './img/medellin.jpeg', category: 'D√≠a Especial', hasImage: true },
            { id: 'cartagena', unlockDate: '2026-01-02T08:00:00', title: 'Cartagena con Mam√°', description: '¬°Sol, brisa y mar! Un viaje especial para ti y tu madre.', imageUrl: './img/cartagena.png', category: 'D√≠a Especial', hasImage: true },
            { id: 'medellin', unlockDate: '2026-04-01T08:00:00', title: 'Noche de concierto', description: 'Disfrutemos de una noche de Queen con nuestros amigos.', imageUrl: './img/Concierto.png', category: 'D√≠a Especial', hasImage: true },
            
            // --- ROM√ÅNTICOS ---
            { id: 'rom-01', title: 'Chuchitos Ilimitados', description: 'Sesi√≥n de chuchitos sin derecho a negarme.', emoji: 'üíã', category: 'Rom√°ntico' },
            { id: 'rom-02', title: 'Cuddle Time', description: 'Dejo de jugar Dofus para ir a arruncharme.', emoji: 'üéÆ', category: 'Rom√°ntico' },
            { id: 'rom-03', title: 'Cita Sorpresa', description: 'Yo planeo todo, t√∫ solo te pones hermosa.', emoji: 'üïØÔ∏è', category: 'Rom√°ntico' },
            { id: 'rom-04', title: 'Cine a tu Antojo', description: 'Vemos la pel√≠cula que T√ö elijas. Incluye snacks.', emoji: 'üçø', category: 'Rom√°ntico' },
            { id: 'rom-05', title: 'Bot√≥n de Contentarse', description: 'Si estoy de mal genio, este vale me obliga a un abrazo.', emoji: 'ü´Ç', category: 'Rom√°ntico' },
            { id: 'rom-08', title: 'Sesi√≥n fotogr√°fica', description: 'Vamos a un parque y nos tomaremos tantas fotos como desees.', emoji: 'üì∏', category: 'Rom√°ntico' },
            { id: 'rom-09', title: 'Due√±a de la playlist', description: 'T√∫ eres la DJ. Sin cr√≠ticas hoy, cantaremos a todo pulm√≥n.', emoji: 'üéµ', category: 'Rom√°ntico' },
            { id: 'rom-10', title: 'Planeando nuestra vida', description: 'Hablaremos de nuestro futuro, d√≥nde vivir y planes con nuestro hijo/a.', emoji: '‚úâÔ∏è', category: 'Rom√°ntico' },
            { id: 'rom-11', title: 'Poder de Veto', description: 'Me comprometo a no ver el partido y dedicarme solo a ti.', emoji: 'üè†', category: 'Rom√°ntico' },

            // --- RELAJACI√ìN ---
            { id: 'rel-01', title: 'Masaje de Pies VIP', description: '20 minutos de relax total despu√©s de un d√≠a largo.', emoji: 'ü¶∂', category: 'Relajaci√≥n' },
            { id: 'rel-02', title: 'English mode', description: 'Let‚Äôs talk only in English for the rest of the day.', emoji: 'üá¨üáß', category: 'Relajaci√≥n' },
            { id: 'rel-03', title: 'Vale por Dormir', description: 'Yo cuido a las gatas. T√∫ duerme hasta tarde.', emoji: 'üõå', category: 'Relajaci√≥n' },
            { id: 'rel-04', title: 'Spa Casero', description: 'Ba√±o caliente, skin routine, exfoliaci√≥n y manicure.', emoji: 'üõÅ', category: 'Relajaci√≥n' },
            { id: 'rel-06', title: 'D√≠a Sin Decisiones', description: 'Hoy no eliges ni qu√© comer. Yo me encargo.', emoji: 'üõãÔ∏è', category: 'Relajaci√≥n' },
            { id: 'rel-07', title: 'Marat√≥n de series', description: 'Dedicamos la tarde a ver esa serie que te tiene enganchada.', emoji: 'ü§´', category: 'Relajaci√≥n' },

            // --- FAMILIAR ---
            { id: 'fam-01', title: 'El Primer Juguete', description: 'Elegiremos el primer detalle para nuestro futuro hijo/a.', emoji: 'üß∏', category: 'Familiar' },
            { id: 'fam-02', title: 'D√≠a con tus pap√°s', description: 'Compartiremos el d√≠a con tu familia.', emoji: 'üëµ', category: 'Familiar' },
            { id: 'fam-03', title: 'Antojo de Medianoche', description: 'Voy por lo que quieras, no importa la hora.', emoji: 'üç¶', category: 'Familiar' },
            { id: 'fam-04', title: 'Men√∫ a la Carta', description: 'T√∫ pides, yo cocino y limpio absolutamente todo.', emoji: 'ü•ò', category: 'Familiar' },
            { id: 'fam-05', title: 'Pijamada real', description: 'C√≥cteles, risas y charlas hasta que salga el sol.', emoji: 'üçπ', category: 'Familiar' },
            { id: 'fam-09', title: 'Nuestra Tradici√≥n', description: 'Inventaremos una tradici√≥n nueva cada a√±o.', emoji: 'üïØÔ∏è', category: 'Familiar' },

            // --- SEXY (EL BA√öL) ---
            { id: 'fantasia', unlockDate: '2026-01-25T08:00:00', title: 'Noche de Fantas√≠a', description: 'Masaje er√≥tico sorpresa (conmigo como espectador).', imageUrl: './img/masaje.jpeg', category: 'Sexy', hasImage: true },
            { id: 'sex-01', title: 'Reto Creativo', description: 'Me pongo creativo con un reto picante.', emoji: 'üòà', category: 'Sexy' },
            { id: 'sex-02', title: 'Excursi√≥n Prohibida', description: 'Empa√±ar los vidrios del carro.', emoji: 'üöó', category: 'Sexy' },
            { id: 'sex-03', title: 'Garant√≠a de Placer', description: 'Noche enfocada 100% en tu m√°ximo placer.', emoji: 'üå∂Ô∏è', category: 'Sexy' },
            { id: 'sex-04', title: 'Ma√±anero Garantizado', description: 'Iniciar el d√≠a con energ√≠a y mucho placer.', emoji: 'üåÖ', category: 'Sexy' },
            { id: 'sex-05', title: 'Pasarela Privada', description: 'T√∫ estrenas lencer√≠a y me das un desfile.', emoji: 'üë†', category: 'Sexy' },
            { id: 'sex-06', title: 'El Rapid√≠n', description: 'Donde sea y cuando sea.', emoji: '‚ö°', category: 'Sexy' },
            { id: 'sex-07', title: 'Noche de Roles', description: 'Personajes nuevos... ¬øQui√©nes seremos?', emoji: 'üé≠', category: 'Sexy' },
            { id: 'sex-08', title: 'Apuesta y Gana', description: 'Jugamos a lo que quieras; prendas son apuestas.', emoji: 'üÉè', category: 'Sexy' },
            { id: 'sex-09', title: 'Escritores', description: 'Escribiremos juntos un relato er√≥tico.', emoji: '‚úçÔ∏è', category: 'Sexy' },
            { id: 'sex-10', title: 'Noche Lenta', description: 'Sin relojes, sin prisa, solo piel.', emoji: 'üåí', category: 'Sexy' },
            { id: 'sex-11', title: 'Amarrada por tu bien', description: 'Hoy te sometes. Eres mi juguete favorito.', emoji: '‚õìÔ∏è', category: 'Sexy' },
            { id: 'sex-12', title: 'T√∫ Mandas', description: 'Yo solo obedezco √≥rdenes. Soy todo tuyo.', emoji: 'üëë', category: 'Sexy' }
        ];

        const catStyles = { 'Rom√°ntico': 'bg-pink-100 text-pink-700', 'Relajaci√≥n': 'bg-blue-100 text-blue-700', 'Familiar': 'bg-green-100 text-green-700', 'D√≠a Especial': 'bg-yellow-100 text-yellow-700', 'Sexy': 'bg-red-100 text-red-700' };

        function getRedeemed() { return JSON.parse(localStorage.getItem('redeemed_2026_final') || '{}'); }

        // Mezcla estable para normales
        const shuffledNormal = coupons.filter(c => ['Rom√°ntico', 'Relajaci√≥n', 'Familiar'].includes(c.category)).sort(() => Math.random() - 0.5);

        function checkStatus() {
            const now = new Date();
            const wrapper = document.getElementById('countdown-wrapper');
            const content = document.getElementById('main-content');

            if (now < UNLOCK_DATE && !MODO_PRUEBA) {
                wrapper.classList.remove('hidden');
                updateCountdown();
                setInterval(updateCountdown, 1000);
            } else {
                content.classList.remove('hidden');
                render();
            }
        }

        function updateCountdown() {
            const diff = UNLOCK_DATE - new Date();
            if (diff <= 0) { window.location.reload(); return; }
            document.getElementById('cd-days').innerText = Math.floor(diff / 86400000).toString().padStart(2, '0');
            document.getElementById('cd-hours').innerText = Math.floor((diff % 86400000) / 3600000).toString().padStart(2, '0');
            document.getElementById('cd-mins').innerText = Math.floor((diff % 3600000) / 60000).toString().padStart(2, '0');
            document.getElementById('cd-secs').innerText = Math.floor((diff % 60000) / 1000).toString().padStart(2, '0');
        }

        function render() {
            const specialsGrid = document.getElementById('specials-grid');
            const mainGrid = document.getElementById('main-grid');
            const secretGrid = document.getElementById('secret-grid');
            const redeemed = getRedeemed();
            const now = new Date();

            // Especiales (Est√°ticos arriba)
            const specials = coupons.filter(c => c.category === 'D√≠a Especial');
            specialsGrid.innerHTML = specials.map(c => renderCard(c, redeemed[c.id], now)).join('');

            // Talonario revuelto
            mainGrid.innerHTML = shuffledNormal.map(c => renderCard(c, redeemed[c.id], now)).join('');

            // Sexy (Ba√∫l)
            const sexy = coupons.filter(c => c.category === 'Sexy');
            secretGrid.innerHTML = sexy.map(c => renderCard(c, redeemed[c.id], now)).join('');
        }

        function renderCard(c, redeemedDate, now) {
            // El candado individual solo para los especiales que a√∫n no llegan
            const isLocked = !MODO_PRUEBA && c.unlockDate && new Date(c.unlockDate) > now;
            const style = catStyles[c.category] || 'bg-gray-100';
            const strike = redeemedDate ? 'text-strike' : '';
            
            if (isLocked) {
                const dateStr = new Date(c.unlockDate).toLocaleDateString('es-ES', {day:'numeric', month:'long'});
                return `<div class="bg-gray-200 rounded-xl p-8 text-center flex flex-col items-center justify-center border-2 border-dashed border-gray-300 opacity-60 h-64">
                    <span class="text-4xl mb-2">üîí</span><p class="text-xs font-bold text-gray-500 uppercase">Se desbloquea el</p><p class="font-script text-2xl text-brand-wine">${dateStr}</p>
                </div>`;
            }

            const redeemedInfo = redeemedDate ? `<p class="text-[10px] italic text-gray-400 mt-2">Canjeado el ${new Date(redeemedDate).toLocaleDateString('es-ES')}</p>` : '';

            if (c.hasImage) {
                return `<div class="bg-white rounded-xl shadow-lg overflow-hidden flex flex-col relative animate-pop h-full ${redeemedDate ? 'coupon-redeemed' : ''}">
                    <img src="${c.imageUrl}" class="w-full h-44 object-cover" onerror="this.src='https://via.placeholder.com/400x300?text=Momento+Especial'">
                    <div class="p-6 flex-grow text-center">
                        <span class="${style} text-[10px] px-3 py-1 rounded-full uppercase font-bold">${c.category}</span>
                        <h3 class="font-script text-3xl my-3 ${strike}">${c.title}</h3>
                        <p class="text-sm text-gray-600 ${strike}">${c.description}</p>
                        ${redeemedInfo}
                    </div>
                    ${redeemedDate ? '<div class="redeem-overlay">CANJEADO</div>' : `<button onclick="redeem('${c.id}')" class="m-6 mt-0 bg-brand-wine text-white py-3 rounded-lg font-bold">CANJEAR AHORA</button>`}
                </div>`;
            }

            return `<div class="ticket-design rounded-xl p-6 flex flex-col items-center text-center animate-pop h-full relative ${redeemedDate ? 'coupon-redeemed' : ''}">
                <div class="text-4xl mb-4">${c.emoji}</div>
                <span class="${style} text-[10px] px-3 py-1 rounded-full uppercase font-bold">${c.category}</span>
                <h3 class="font-script text-3xl my-3 ${strike}">${c.title}</h3>
                <p class="text-sm text-gray-600 mb-6 ${strike}">${c.description}</p>
                ${redeemedInfo}
                ${redeemedDate ? '<div class="redeem-overlay">CANJEADO</div>' : `<button onclick="redeem('${c.id}')" class="mt-auto border-2 border-brand-wine text-brand-wine px-6 py-2 rounded-full font-bold">USAR TICKET</button>`}
            </div>`;
        }

        window.redeem = (id) => {
            const c = coupons.find(x => x.id === id);
            if (!confirm(`¬øConfirmas que quieres usar "${c.title}"?`)) return;
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            const redeemed = getRedeemed();
            redeemed[id] = new Date().toISOString();
            localStorage.setItem('redeemed_2026_final', JSON.stringify(redeemed));
            window.location.href = `mailto:${TU_EMAIL}?subject=Cup√≥n Canjeado: ${c.title}&body=¬°Amor! Acabo de usar mi cup√≥n de "${c.title}". Prep√°rate ‚ù§Ô∏è`;
            setTimeout(() => render(), 600);
        };

        let clicks = 0;
        document.getElementById('secret-trigger').addEventListener('click', () => {
            clicks++;
            if (clicks === 3) {
                if (confirm("¬øQuieres entrar al ba√∫l secreto? üî•")) {
                    document.getElementById('secret-section').classList.remove('hidden');
                    document.getElementById('secret-section').scrollIntoView({ behavior: 'smooth' });
                }
                clicks = 0;
            }
        });

        checkStatus();
    </script>
</body>
</html>
