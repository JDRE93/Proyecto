<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feliz Cumplea√±os, Mi Amor</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif'],
                        'script': ['Dancing Script', 'cursive']
                    },
                    colors: {
                        'brand-ivory': '#FDFBF5',
                        'brand-gold': '#d4af37',
                        'brand-wine': '#722f37',
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #FDFBF5; margin: 0; padding: 0; }
        header, section, footer { text-align: center; }

        /* ANIMACIONES */
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        .coupon-animate { animation: fadeUp 0.6s ease forwards; }

        /* DISE√ëO DE TICKET */
        .ticket-design {
            border: 2px dashed #d1d5db;
            background-color: #ffffff;
            position: relative;
            transition: all 0.3s ease;
        }
        .ticket-design::before, .ticket-design::after {
            content: '';
            position: absolute;
            width: 24px;
            height: 24px;
            background-color: #FDFBF5;
            border-radius: 50%;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
        }
        .ticket-design::before { left: -14px; border-right: 2px dashed #d1d5db; }
        .ticket-design::after { right: -14px; border-left: 2px dashed #d1d5db; }

        /* CONTADOR */
        .countdown-container {
            padding: 2rem;
            background-color: #ffffff;
            border-radius: 0.5rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            border-top: 4px solid #d4af37;
            max-width: 600px;
            margin: 2rem auto;
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }
        .countdown-number { font-size: 2.5rem; font-weight: 700; color: #722f37; }
        .countdown-label { font-family: 'Dancing Script', cursive; font-size: 1.1rem; color: #4b5563; }

        /* ESTADO CANJEADO */
        .coupon-redeemed { opacity: 0.6; filter: grayscale(0.7); }
        .text-strike {
            text-decoration: line-through !important;
            text-decoration-color: #ef4444 !important;
            text-decoration-thickness: 3px !important;
        }
        .redeem-overlay {
            position: absolute;
            top: 50%; left: 0; right: 0;
            background-color: #ef4444;
            color: white;
            font-weight: 800;
            text-transform: uppercase;
            padding: 0.5rem;
            transform: rotate(-10deg) translateY(-50%);
            z-index: 50;
            font-size: 1.5rem;
            text-align: center;
            pointer-events: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        /* CUP√ìN BLOQUEADO */
        .coupon-locked {
            background-color: #f3f4f6;
            border: 2px dashed #9ca3af;
            min-height: 280px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .lock-bg-img {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            object-fit: cover;
            opacity: 0.1;
            filter: grayscale(1);
        }
    </style>
</head>
<body class="p-4 md:p-10">

    <header class="mb-10">
        <h1 class="font-script text-5xl md:text-7xl text-gray-800">Feliz Cumplea√±os mor, Que los cumplas muy feliz</h1>
        <p class="font-script text-2xl text-brand-wine mt-2 text-center">Tu Cuponera de Regalos para 2026</p>
         <p class="font-script text-2xl text-brand-wine mt-2 text-center">Porque 30 se cumplen todo el a√±o</p>
    </header>

    <main class="max-w-6xl mx-auto">
        <!-- SECCI√ìN CONTADOR -->
        <section id="countdown-section" class="mb-12 hidden">
            <h2 class="font-script text-3xl mb-4 text-gray-700">Tu a√±o de sorpresas comienza en...</h2>
            <div class="countdown-container">
                <div><div id="days" class="countdown-number">00</div><div class="countdown-label">D√≠as</div></div>
                <div><div id="hours" class="countdown-number">00</div><div class="countdown-label">Horas</div></div>
                <div><div id="mins" class="countdown-number">00</div><div class="countdown-label">Mins</div></div>
                <div><div id="secs" class="countdown-number">00</div><div class="countdown-label">Segs</div></div>
            </div>
        </section>

        <!-- SECCI√ìN ADELANTO -->
        <section id="teaser-section" class="mb-12 hidden">
            <h2 class="font-script text-4xl mb-6 text-brand-wine">¬°Un Adelanto Exclusivo!</h2>
            <div id="teaser-card" class="coupon-locked rounded-xl p-10 cursor-pointer hover:scale-105 transition-all max-w-lg mx-auto shadow-md">
                <span class="text-5xl mb-4">üéÅ</span>
                <h3 class="font-script text-3xl text-gray-600 relative z-10">Toca para abrir...</h3>
            </div>
        </section>

        <!-- SECCI√ìN PRINCIPAL -->
        <section id="coupons-section" class="hidden">
            <h2 class="font-script text-5xl text-gray-800 mb-6 text-center">Momentos Especiales</h2>
            <div id="date-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-20"></div>

            <hr class="border-dashed border-gray-300 mb-16">

            <h2 class="font-script text-5xl text-gray-800 mb-6 text-center">Talonario "A Tu Antojo"</h2>
            <div id="demand-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        </section>
    </main>

    <footer class="mt-20 opacity-50 text-sm italic py-10 text-center">
        Hecho con ‚ù§Ô∏è por tu esposo
    </footer>

    <script>
        // ======================================================
        // DATA DE CUPONES (RESTAURADA A 35 ITEMS)
        // ======================================================
        const coupons = [
            // --- ESPECIALES (CON IMAGEN) ---
            { id: 'cumple', unlockDate: '2025-01-03T00:00:00', title: '¬°Feliz Cumplea√±os!', description: 'Hoy eres la Reina y la vas a pasar muy bien.', imageUrl: './img/cumple.jpg', category: 'D√≠a Especial', hasImage: true },
            { id: 'medellin', unlockDate: '2025-02-13T08:00:00', title: 'Aniversario en Medell√≠n', description: 'Escapada rom√°ntica a la Eterna Primavera. Solo t√∫ y yo celebrando nuestro amor.', imageUrl: './img/medellin.jpeg', category: 'D√≠a Especial', hasImage: true },
            { id: 'cartagena', unlockDate: '2025-02-28T08:00:00', title: 'Cartagena con Mam√°', description: '¬°Sol, brisa y mar! Te vas de viaje con tu mam√° para disfrutar juntas.', imageUrl: './img/cartagena.png', category: 'D√≠a Especial', hasImage: true },
            { id: 'fantasia',unlockDate: '2025-02-28T08:00:00', title: 'Noche de Fantas√≠a', description: 'Masaje er√≥tico realizado por una chica (conmigo como espectador).', imageUrl: './img/masaje.jpeg', category: 'D√≠a Especial', hasImage: true },

            // --- ROM√ÅNTICOS ---
            { id: 'rom-01', title: 'Chuchitos Ilimitados', description: 'Sesi√≥n de muchos besitos sin derecho a negarme.', emoji: 'üíã', category: 'Rom√°ntico' },
            { id: 'rom-02', title: 'Cuddle Time', description: 'Dejo de jugar inmediatamente para ir a arruncharme contigo.', emoji: 'üéÆ', category: 'Rom√°ntico' },
            { id: 'rom-03', title: 'Cita Sorpresa', description: 'T√∫ solo enc√°rgate de verte hermosa, yo me encargo del resto.', emoji: 'üïØÔ∏è', category: 'Rom√°ntico' },
            { id: 'rom-04', title: 'Cine a tu Antojo', description: 'Vemos la pel√≠cula que T√ö elijas. Incluye crispetas y papitas.', emoji: 'üçø', category: 'Rom√°ntico' },
            { id: 'rom-05', title: 'Bot√≥n de Contentarse', description: 'Si estoy de mal genio, este cup√≥n me obliga a darte un abrazo.', emoji: 'ü´Ç', category: 'Rom√°ntico' },
            { id: 'rom-08', title: 'Fot√≥grafo Personal', description: 'Paciencia infinita para todas las fotos que quieras.', emoji: 'üì∏', category: 'Rom√°ntico' },
            { id: 'rom-09', title: 'Due√±a del Auxiliar', description: 'T√∫ eres la DJ hoy. No se vale criticar tus canciones.', emoji: 'üéµ', category: 'Rom√°ntico' },
            { id: 'rom-10', title: 'Carta del Futuro', description: 'Te escribir√© una carta habl√°ndote de lo que sue√±o contigo.', emoji: '‚úâÔ∏è', category: 'Rom√°ntico' },
            { id: 'rom-11', title: 'Poder de Veto', description: '¬øPereza de ir a un plan? Yo pongo la excusa perfecta.', emoji: 'üè†', category: 'Rom√°ntico' },

            // --- RELAJACI√ìN ---
            { id: 'rel-01', title: 'Masaje de Pies VIP', description: '20 minutos de masaje relajante sin quejas.', emoji: 'ü¶∂', category: 'Relajaci√≥n' },
            { id: 'rel-02', title: 'Modo Avi√≥n', description: 'Una hora de mi atenci√≥n indivisa. Sin celulares.', emoji: 'üõ´', category: 'Relajaci√≥n' },
            { id: 'rel-03', title: 'Vale por Dormir', description: 'Ma√±ana yo me encargo de todo. T√∫ duermes hasta tarde.', emoji: 'üõå', category: 'Relajaci√≥n' },
            { id: 'rel-04', title: 'Spa Casero', description: 'Ba√±o caliente, velas y m√∫sica relajante lista para ti.', emoji: 'üõÅ', category: 'Relajaci√≥n' },
            { id: 'rel-06', title: 'D√≠a Sin Decisiones', description: 'Hoy no decides nada. Yo me encargo absolutamente de todo.', emoji: 'üõãÔ∏è', category: 'Relajaci√≥n' },
            { id: 'rel-07', title: 'Tarde de Silencio', description: 'Sin hablar, solo paz, calma y compa√±√≠a.', emoji: 'ü§´', category: 'Relajaci√≥n' },

            // --- FAMILIAR ---
            { id: 'fam-01', title: 'El Primer Juguete', description: 'Vamos juntos a comprar el primer juguete para nuestro hij@.', emoji: 'üß∏', category: 'Familiar' },
            { id: 'fam-02', title: 'D√≠a con los Abuelos', description: 'D√≠a completo en familia: helado y comida con ellos.', emoji: 'üëµ', category: 'Familiar' },
            { id: 'fam-03', title: 'Antojo de Medianoche', description: 'No importa la hora, salgo a conseguir lo que quieras.', emoji: 'üç¶', category: 'Familiar' },
            { id: 'fam-04', title: 'Men√∫ a la Carta', description: 'T√∫ eliges qu√© comer, yo voy al s√∫per y cocino.', emoji: 'ü•ò', category: 'Familiar' },
            { id: 'fam-05', title: 'Desayuno Real', description: 'Te llevo el desayuno a la cama con todo lo que te gusta.', emoji: 'üç≥', category: 'Familiar' },
            { id: 'fam-09', title: 'Nuestra Tradici√≥n', description: 'Crearemos una tradici√≥n solo nuestra para cada a√±o.', emoji: 'üïØÔ∏è', category: 'Familiar' },

            // --- SEXY ---
            { id: 'sex-01', title: 'Reto Creativo', description: 'Me pongo creativo con un reto de la app para ti.', emoji: 'üòà', category: 'Sexy' },
            { id: 'sex-02', title: 'Excursi√≥n Prohibida', description: 'Nos vamos en el carro a empa√±ar los vidrios.', emoji: 'üöó', category: 'Sexy' },
            { id: 'sex-03', title: 'Garant√≠a de Placer', description: 'Te aseguras por lo menos dos orgasmos esta noche.', emoji: 'üå∂Ô∏è', category: 'Sexy' },
            { id: 'sex-04', title: 'Ma√±anero Garantizado', description: 'Te despierto antes para iniciar el d√≠a con mucho placer.', emoji: 'üåÖ', category: 'Sexy' },
            { id: 'sex-05', title: 'Pasarela Privada', description: 'T√∫ eliges la lencer√≠a, yo pago, y me das un desfile.', emoji: 'üë†', category: 'Sexy' },
            { id: 'sex-06', title: 'El Rapid√≠n', description: 'Vale por un encuentro intenso donde sea y cuando sea.', emoji: '‚ö°', category: 'Sexy' },
            { id: 'sex-07', title: 'Noche de Roles', description: 'T√∫ eliges los personajes, yo me meto en el papel.', emoji: 'üé≠', category: 'Sexy' },
            { id: 'sex-08', title: 'Strip Poker / Juego', description: 'Jugamos a lo que quieras pero apostamos prendas.', emoji: 'üÉè', category: 'Sexy' },
            { id: 'sex-09', title: 'Noche Lenta', description: 'Sin af√°n. Sin reloj. Sin interrupciones.', emoji: 'üåí', category: 'Sexy' },
            { id: 'sex-10', title: 'T√∫ Mandas', description: 'Esta noche todo lo decides t√∫. Yo obedezco.', emoji: 'üëë', category: 'Sexy' }
        ];

        const categoryStyles = {
            'Rom√°ntico': 'bg-pink-100 text-pink-800',
            'Familiar': 'bg-green-100 text-green-800',
            'Relajaci√≥n': 'bg-blue-100 text-blue-800',
            'Sexy': 'bg-red-100 text-red-800',
            'D√≠a Especial': 'bg-yellow-100 text-yellow-800',
            'Default': 'bg-gray-100 text-gray-800'
        };

        // --- MANEJO DE ESTADO ---
        const today = new Date(); 
        // const today = new Date('2026-01-03T10:00:00'); // Prueba Fase 3
        
        const birthdayDate = new Date('2025-01-03T00:00:00');
        const teaserDate = new Date('2025-12-03T00:00:00');

        function getRedeemed() { return JSON.parse(localStorage.getItem('redeemed') || '{}'); }

        document.addEventListener('DOMContentLoaded', () => {
            if (today < teaserDate) {
                showCountdown();
            } else if (today < birthdayDate) {
                showCountdown();
                showTeaser();
            } else {
                showCoupons();
            }
        });

        function showCountdown() {
            const sec = document.getElementById('countdown-section');
            sec.classList.remove('hidden');
            setInterval(() => {
                const dist = birthdayDate - new Date();
                if (dist < 0) return;
                document.getElementById('days').innerText = Math.floor(dist / 86400000).toString().padStart(2,'0');
                document.getElementById('hours').innerText = Math.floor((dist % 86400000) / 3600000).toString().padStart(2,'0');
                document.getElementById('mins').innerText = Math.floor((dist % 3600000) / 60000).toString().padStart(2,'0');
                document.getElementById('secs').innerText = Math.floor((dist % 60000) / 1000).toString().padStart(2,'0');
            }, 1000);
        }

        function showTeaser() {
            const sec = document.getElementById('teaser-section');
            sec.classList.remove('hidden');
            const card = document.getElementById('teaser-card');
            card.onclick = () => {
                const item = coupons.find(c => c.id === 'cartagena');
                card.innerHTML = `
                    <div class="bg-white rounded-xl shadow-xl overflow-hidden w-full coupon-animate">
                        <img src="${item.imageUrl}" class="w-full h-48 object-contain bg-gray-50">
                        <div class="p-6 text-center">
                            <h3 class="font-script text-3xl text-brand-wine">¬°Un Adelanto!</h3>
                            <p class="font-bold my-2">${item.title}</p>
                            <p class="text-xs text-gray-500 italic">Podr√°s canjearlo el 28 de Febrero</p>
                        </div>
                    </div>`;
            };
        }

        function showCoupons() {
            document.getElementById('coupons-section').classList.remove('hidden');
            const redeemed = getRedeemed();
            const dateCont = document.getElementById('date-container');
            const demandCont = document.getElementById('demand-container');

            coupons.forEach(c => {
                const redeemedDate = redeemed[c.id];
                const isLocked = c.unlockDate && new Date(c.unlockDate) > today;
                const html = isLocked ? createLocked(c) : createUnlocked(c, redeemedDate);
                (c.unlockDate ? dateCont : demandCont).innerHTML += `<div id="slot-${c.id}" class="h-full coupon-animate">${html}</div>`;
            });
        }

        function createUnlocked(c, redeemedDate) {
            const style = categoryStyles[c.category] || categoryStyles.Default;
            const strike = redeemedDate ? 'text-strike' : '';
            
            if (c.hasImage) {
                return `
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden border-t-8 border-brand-gold h-full flex flex-col relative ${redeemedDate ? 'coupon-redeemed' : ''}">
                        <img src="${c.imageUrl}" class="w-full h-48 object-cover" onerror="this.src='https://placehold.co/400x300?text=Especial'">
                        <div class="p-6 flex-grow text-center">
                            <span class="${style} text-[10px] px-3 py-1 rounded-full uppercase font-bold">${c.category}</span>
                            <h3 class="font-script text-3xl my-3 text-gray-800 ${strike}">${c.title}</h3>
                            <p class="text-sm text-gray-600 leading-relaxed ${strike}">${c.description}</p>
                        </div>
                        <div class="p-6 pt-0 text-center">
                            <button onclick="redeem('${c.id}')" class="w-full bg-brand-wine text-white py-3 rounded-lg font-bold hover:bg-opacity-90 transition-all ${redeemedDate ? 'hidden' : ''}">Canjear Ahora</button>
                            ${redeemedDate ? `<p class="text-[10px] mt-2 italic text-gray-400">Canjeado el ${new Date(redeemedDate).toLocaleDateString()}</p>` : ''}
                        </div>
                        ${redeemedDate ? '<div class="redeem-overlay">CANJEADO</div>' : ''}
                    </div>`;
            } else {
                return `
                    <div class="ticket-design rounded-xl shadow-md p-6 h-full flex flex-col relative ${redeemedDate ? 'coupon-redeemed' : ''}">
                        <div class="text-4xl mb-4 text-center">${c.emoji || 'üéÅ'}</div>
                        <div class="flex-grow text-center">
                            <span class="${style} text-[10px] px-3 py-1 rounded-full uppercase font-bold">${c.category}</span>
                            <h3 class="font-script text-3xl my-3 text-gray-800 ${strike}">${c.title}</h3>
                            <p class="text-sm text-gray-600 leading-relaxed ${strike}">${c.description}</p>
                        </div>
                        <div class="mt-6 text-center">
                            <button onclick="redeem('${c.id}')" class="w-full border-2 border-brand-wine text-brand-wine py-2 rounded-lg font-bold hover:bg-brand-wine hover:text-white transition-colors ${redeemedDate ? 'hidden' : ''}">Canjear Ticket</button>
                            ${redeemedDate ? `<p class="text-[10px] mt-2 italic text-gray-400">Canjeado el ${new Date(redeemedDate).toLocaleDateString()}</p>` : ''}
                        </div>
                        ${redeemedDate ? '<div class="redeem-overlay">CANJEADO</div>' : ''}
                    </div>`;
            }
        }

        function createLocked(c) {
            const date = new Date(c.unlockDate).toLocaleDateString('es-ES', {day:'numeric', month:'long'});
            return `
                <div class="coupon-locked rounded-xl p-8 text-center h-full shadow-inner overflow-hidden">
                    <img src="${c.imageUrl}" class="lock-bg-img">
                    <span class="text-4xl mb-2 relative z-10">üîí</span>
                    <p class="font-bold text-gray-600 relative z-10">Se desbloquea el</p>
                    <p class="text-brand-wine font-bold text-xl relative z-10">${date}</p>
                </div>`;
        }

        window.redeem = function(id) {
            const redeemed = getRedeemed();
            if (redeemed[id]) return;

            const c = coupons.find(x => x.id === id);
            const msg = `Este momento es solo tuyo üíõ\n\n¬øSegura que quieres canjear:\n"${c.title}"?\n\nPrometo hacerlo inolvidable.`;
            
            if (!confirm(msg)) return;
            
            // Visual inmediato
            const slot = document.getElementById(`slot-${id}`);
            const card = slot.querySelector('div');
            card.classList.add('coupon-redeemed');
            card.querySelectorAll('h3, p').forEach(t => t.classList.add('text-strike'));
            if (card.querySelector('button')) card.querySelector('button').classList.add('hidden');
            const overlay = document.createElement('div');
            overlay.className = 'redeem-overlay';
            overlay.innerText = 'CANJEADO';
            card.appendChild(overlay);

            // Guardar con fecha
            redeemed[id] = new Date().toISOString();
            localStorage.setItem('redeemed', JSON.stringify(redeemed));
            
            // Mail
            const tuEmail = 'TU-EMAIL-AQUI@gmail.com'; // CAMBIA ESTO
            window.location.href = `mailto:${tuEmail}?subject=Cup√≥n Canjeado: ${c.title}&body=Amor, acabo de canjear mi cup√≥n de "${c.title}". ¬°Prep√°rate!`;
            
            setTimeout(() => window.location.reload(), 2000);
        };
    </script>
</body>
</html>